{% extends "layout.html" %}

{% block scripts %}
<script type="text/javascript">
  function displayCard() {
    if (language=='english') {
      $('.translation-english').css('display','block');
      $('.translation-chinese').css('display','none');
    } else if (language=='chinese') {
      $('.translation-english').css('display','none');
      $('.translation-chinese').css('display','block');
    }
  };

  function setLanguage(newLanguage) {
    language = newLanguage;
    if (language=='english') {
      $('#language-button').text(language);
    } else if (language=='chinese') {
      $('#language-button').text(language);
    }
  };

  function setPinyin(pinyin) {
    if (pinyin) {
      $('.translation-pinyin').css('display', 'none');
      $('#pinyin-button').text('show pinyin');
    } else if (!pinyin) {
      $('.translation-pinyin').css('display', 'block');
      $('#pinyin-button').text('hide pinyin');
    }
  };

  var language = "{{ session['language'] }}";
  var displayLanguage = 'english';
  if (language == 'chinese') {
    displayLanguage = 'chinese';
  }

  $(document).ready(function() {

    setLanguage(language);
    displayCard();

    {% if session['pinyin'] %}
      setPinyin(true);
    {% else %}
      setPinyin(false);
    {% endif %}

    if (language=='english') {
      $('.translation-english').css('display','block');
    } else if (language=='chinese') {
      $('.translation-chinese').css('display','block');
    }

    $('.flash-card-word').click(function() { 
      if (displayLanguage =='english') {
        displayLanguage = 'chinese';
        $('.translation-english').css('display','none');
        $('.translation-chinese').css('display','block');
      } else if (displayLanguage =='chinese') {
        displayLanguage = 'english';
        $('.translation-english').css('display','block');
        $('.translation-chinese').css('display','none');
      }
    });

    $('#pinyin-button').click(function() {
      window.location = "{{ url_for('togglePinyin') }}";
    });
  });
</script>

{% endblock %}


{% block title %}
    <!-- pinyin button -->
    <a href="{{ url_for('togglePinyin') }}">
      <span class="title-bar-button" id="pinyin-button"></span>
    </a>
    <!-- language toggle -->
    {% if session['language'] == 'chinese' %}
    <a href="{{ url_for('toggleEnglish') }}">
    {% else %}
    <a href="{{ url_for('toggleChinese') }}">
    {% endif %}
      <span class="title-bar-button" id="language-button"></span>
    </a>
{% endblock %}

{% block content %}
  <div class="flash-card">
    <a href="{{ url_for('prevCard') }}"> 
      <span class="navigation-button-prev">
      </span>
    </a>
    <a href="{{ url_for('nextCard') }}">
      <span class="navigation-button-next">
      </span>
    </a>
    <div class="flash-card-word">
      <span class="translation-english">
        {{ word.english.upper() }}
      </span>
      <span class="translation-chinese">
        {{ word.chinese.replace(' ','') }}
        <span class="translation-pinyin">({{ word.pinyin }})</span>
      </span>
    </div>
  </div>
{% endblock %}